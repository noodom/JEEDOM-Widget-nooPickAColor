!function(o){"use strict";o.fn.setColor=function(t){return o(this).find("input").val(t).trigger("changeInput")},o.fn.pickAColor=function(t){var e="ontouchstart"in window,a=(parseInt(o(window).width(),10)<767?!0:!1,"localStorage"in window&&null!==window.localStorage&&"object"==typeof JSON),n=document.all&&!window.atob,r=e?"touchstart.pickAColor":"mousedown.pickAColor",s=e?"touchmove.pickAColor":"mousemove.pickAColor",i=e?"touchend.pickAColor":"mouseup.pickAColor",l=e?"touchend.pickAColor":"click.pickAColor",d="dragging.pickAColor",c="endDrag.pickAColor",p=o.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,allowBlank:!1,inlineDropdown:!1,basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},t);p.showAdvanced||p.showBasicColors||(p.showBasicColors=!0);var u=p.showSavedColors&&p.showAdvanced||p.showBasicColors&&p.showSavedColors||p.showBasicColors&&p.showAdvanced,h=function(){var t=o("<div>").addClass("input-group-btn"),e=o("<button type='button'>").addClass("btn btn-default color-dropdown dropdown-toggle"),a=o("<span>").addClass("color-preview current-color"),r=o("<span>").addClass("caret"),s=o("<div>").addClass("color-menu dropdown-menu");if(p.inlineDropdown&&s.addClass("color-menu--inline"),p.showHexInput||(e.addClass("no-hex"),s.addClass("no-hex")),t.append(e.append(a).append(r)),u||p.showSpectrum||s.addClass("small"),u){var i=o("<div>").addClass("color-menu-tabs"),l=p.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active";p.showBasicColors&&i.append(o("<span>").addClass("basicColors-tab tab tab-active").append(o("<a>").text("Couleurs basiques"))),p.showSavedColors&&i.append(o("<span>").addClass(l).append(o("<a>").text("Sauvegardes"))),p.showAdvanced&&i.append(o("<span>").addClass("advanced-tab tab").append(o("<a>").text("Mode avancé"))),s.append(i)}if(p.showBasicColors){var d=o("<div>").addClass("basicColors-content active-content");p.showSpectrum&&d.append(o("<h6>").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));var c=o("<ul>").addClass("basic-colors-list");o.each(p.basicColors,function(t,e){var a=o("<li>").addClass("color-item"),r=o("<a>").addClass(t+" color-link"),s=o("<span>").addClass("color-preview "+t),i=o("<span>").addClass("color-label").text(t);if(r.append(s,i),s.append(),"#"!==e[0]&&(e="#"+e),s.css("background-color",e),p.showSpectrum){var l=o("<span>").addClass("color-box spectrum-"+t);n&&o.each([0,1],function(a){"fff"!==e&&"000"!==t&&l.append(o("<span>").addClass(t+"-spectrum-"+a+" ie-spectrum"))});var d=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){d.append(o("<span>").addClass("highlight-band-stripe"))}),r.append(l.append(d))}c.append(a.append(r))}),s.append(d.append(c))}if(p.showSavedColors){var h=p.showBasicColors?"inactive-content":"active-content",g=o("<div>").addClass("savedColors-content").addClass(h);g.append(o("<p>").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),s.append(g)}if(p.showAdvanced){var v=p.showBasicColors||p.showSavedColors?"inactive-content":"active-content",f=o("<div>").addClass("advanced-content").addClass(v).append(o("<h6>").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),C=o("<ul>").addClass("advanced-list"),m=o("<li>").addClass("hue-item"),b=o("<span>").addClass("hue-text").text("Hue: ").append(o("<span>").addClass("hue-value").text("0")),w=o("<span>").addClass("color-box spectrum-hue");n&&o.each([0,1,2,3,4,5,6],function(t){w.append(o("<span>").addClass("hue-spectrum-"+t+" ie-spectrum hue"))});var S=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){S.append(o("<span>").addClass("highlight-band-stripe"))}),C.append(m.append(b).append(w.append(S)));var y=o("<li>").addClass("lightness-item"),k=o("<span>").addClass("color-box spectrum-lightness"),x=o("<span>").addClass("lightness-text").text("Luminosité: ").append(o("<span>").addClass("lightness-value").text("50%"));n&&o.each([0,1],function(t){k.append(o("<span>").addClass("lightness-spectrum-"+t+" ie-spectrum"))});var H=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){H.append(o("<span>").addClass("highlight-band-stripe"))}),C.append(y.append(x).append(k.append(H)));var A=o("<li>").addClass("saturation-item"),B=o("<span>").addClass("color-box spectrum-saturation");n&&o.each([0,1],function(t){B.append(o("<span>").addClass("saturation-spectrum-"+t+" ie-spectrum"))});var I=o("<span>").addClass("highlight-band");o.each([0,1,2],function(){I.append(o("<span>").addClass("highlight-band-stripe"))});var M=o("<span>").addClass("saturation-text").text("Saturation: ").append(o("<span>").addClass("saturation-value").text("100%"));C.append(A.append(M).append(B.append(I)));var T=o("<li>").addClass("preview-item").append(o("<span>").addClass("preview-text").text("Prévisualisation")),P=o("<span>").addClass("color-preview advanced").append("<button class='color-select btn btn-mini advanced' type='button'>Sélection</button>");C.append(T.append(P)),s.append(f.append(C))}return t.append(s),t},g={},v={rowsInDropdown:8,maxColsInDropdown:2};if(p.showSavedColors){var f=[];if(a&&localStorage.allSavedColors)f=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors=")){var C=document.cookie.split(";");o.each(C,function(o){C[o].match("pickAColorSavedColors-allSavedColors=")&&(f=C[o].split("=")[1].split(","))})}}var m={initialize:function(t){var e,a,n=o(this);n.on("changeInput",function(o){m.updatePreview(n)}),n.attr("name")||n.attr("name","pick-a-color-"+t),a=n.attr("name"),n.addClass("pick-a-color"),p.allowBlank?n.val().match(/^\s+$|^$/)||(g.defaultColor=tinycolor(n.val()).toHex(),g.typedColor=g.defaultColor,n.val(g.defaultColor)):(g.defaultColor=tinycolor(n.val()).toHex(),g.typedColor=g.defaultColor,n.val(g.defaultColor)),o(n).wrap('<div class="input-group pick-a-color-markup" id="'+a+'">'),e=o(n.parent()),p.showHexInput?e.prepend('<span class="hex-pound input-group-addon">#</span>').append(h()):e.append(h()),p.showHexInput||n.attr("type","hidden")},updatePreview:function(o){p.allowBlank?(g.typedColor=o.val().match(/^\s+$|^$/)?"":tinycolor(o.val()).toHex(),""===g.typedColor?o.siblings(".input-group-btn").find(".current-color").css("background","none"):o.siblings(".input-group-btn").find(".current-color").css("background-color","#"+g.typedColor)):(g.typedColor=tinycolor(o.val()).toHex(),o.siblings(".input-group-btn").find(".current-color").css("background-color","#"+g.typedColor))},pressPreviewButton:function(){var o=arguments[0].thisEvent;o.stopPropagation(),m.toggleDropdown(o.target)},openDropdown:function(t,a){o(".color-menu").each(function(){var t=o(this);if("block"===t.css("display")){var e=t.parents(".input-group-btn");m.closeDropdown(e,t)}}),p.fadeMenuToggle&&!e?o(a).fadeIn("fast"):o(a).show(),o(t).addClass("open")},closeDropdown:function(t,a){p.fadeMenuToggle&&!e?o(a).fadeOut("fast"):o(a).css("display","none"),o(t).removeClass("open")},closeDropdownIfOpen:function(){var o=arguments[0].button,t=arguments[0].menu;"block"===t.css("display")&&m.closeDropdown(o,t)},toggleDropdown:function(t){var e=o(t).parents(".pick-a-color-markup"),a=e.find("input"),n=e.find(".input-group-btn"),r=e.find(".color-menu");a.is(":disabled")||"none"!==r.css("display")?m.closeDropdown(n,r):m.openDropdown(n,r)},tabbable:function(){var t=o(this),e=t.parents(".pick-a-color-markup");t.click(function(){var t=o(this),a=t.attr("class").split(" ")[0].split("-")[0]+"-content",n=t.parents(".dropdown-menu").find("."+a);t.hasClass("tab-active")||(e.find(".tab-active").removeClass("tab-active"),e.find(".active-content").removeClass("active-content").addClass("inactive-content"),t.addClass("tab-active"),o(n).addClass("active-content").removeClass("inactive-content"))})},getColorMultiplier:function(t,a,n){var r="basic"===n?parseInt(o(".color-box").first().width(),10):parseInt(o(".advanced-list").find(".color-box").first().width(),10);0===r&&(r="basic"===n?e?160:200:e?160:300);var s=r/2,i=a/r;return"bidirectional"===t?.5>=i?(1-a/s)/2:-((a-s)/s)/2:"darkenRight"===t?-(i/2):i/2},modifyHSLLightness:function(o,t){var e=o;return e.l+=t,e.l=Math.min(Math.max(0,e.l),1),tinycolor(e).toHslString()},getMoveableArea:function(o){var t={},e=o.parent(),a=o.outerWidth(),n=e.width(),r=e.offset();return t.minX=r.left,t.maxX=n-a,t},moveHighlightBand:function(t,a,n){var r=o(".highlight-band").first().outerWidth(),s=.75*r,i=e?n.originalEvent.pageX:n.pageX,l=i-a.minX-s;l=Math.max(0,Math.min(l,a.maxX)),t.css("position","absolute"),t.css("left",l)},horizontallyDraggable:function(){o(this).on(r,function(t){t.preventDefault();var e=o(t.delegateTarget);e.css("cursor","-webkit-grabbing"),e.css("cursor","-moz-grabbing");var a=m.getMoveableArea(e);o(document).on(s,function(o){e.trigger(d),m.moveHighlightBand(e,a,o)}).on(i,function(t){o(document).off(s),o(document).off(d),e.css("cursor","-webkit-grab"),e.css("cursor","-moz-grab"),e.trigger(c),o(document).off(i)})}).on(i,function(t){t.stopPropagation(),o(document).off(s),o(document).off(d)})},modifyHighlightBand:function(o,t,e){var a={h:0,s:0,l:.05},n={h:0,s:0,l:.5},r=-t,s=o.find(".highlight-band-stripe"),i="lightenRight"===e?m.modifyHSLLightness(n,r):m.modifyHSLLightness(a,r);o.css("border-color",i),s.css("background-color",i)},calculateHighlightedColor:function(){var t,e,a,n,r,s,i,l,d=o(this),c=d.parent(),u=o(".highlight-band").first().outerWidth(),h=u/2,g=arguments[0].type;if("basic"===g){var v=c.attr("class").split("-")[2],f=p.basicColors[v];switch(e=tinycolor(f).toHsl(),f){case"fff":t="darkenRight";break;case"000":t="lightenRight";break;default:t="bidirectional"}}else{var C=d.parents(".advanced-list");n=arguments[0].hsl.s,i=C.find(".spectrum-hue"),a=arguments[0].hsl.h,s=C.find(".spectrum-saturation"),l=C.find(".lightness-value"),r=C.find(".color-preview"),e={h:arguments[0].hsl.h,l:.5,s:arguments[0].hsl.s},t="bidirectional"}var b=parseInt(d.css("left"),10)+h,w=m.getColorMultiplier(t,b,g),S=m.modifyHSLLightness(e,w),y="#"+tinycolor(S).toHex(),k=S.split("(")[1].split(")")[0].split(",")[2],x=parseInt(k.split("%")[0],10)/100;return"basic"===g?(c.siblings(".color-preview").css("background-color",y),c.prev(".color-label").replaceWith('<button class="color-select btn btn-mini" type="button">Sélection</button>'),"darkenRight"!==t&&m.modifyHighlightBand(d,w,t)):(r.css("background-color",y),l.text(k),m.updateSaturationStyles(s,a,x),m.updateHueStyles(i,n,x),m.modifyHighlightBand(o(".advanced-content .highlight-band"),w,t)),"basic"===g?tinycolor(S).toHex():x},updateSavedColorPreview:function(t){o.each(t,function(e){var a=o(t[e]),n=a.attr("class");a.find(".color-preview").css("background-color",n)})},updateSavedColorMarkup:function(t,e){if(e=e?e:f,p.showSavedColors&&e.length>0){p.saveColorsPerElement||(t=o(".savedColors-content"),e=f);var a=v.rowsInDropdown*v.maxColsInDropdown;e=e.slice(0,a);var n=o("<ul>").addClass("saved-color-col 0"),r=o("<ul>").addClass("saved-color-col 1");o.each(e,function(t,e){var a=o("<li>").addClass("color-item"),s=o("<a>").addClass(e);s.append(o("<span>").addClass("color-preview")),s.append(o("<span>").addClass("color-label").text(e)),a.append(s),t%2===0?n.append(a):r.append(a)}),t.html(n),t.append(r);var s=o(t).find("a");m.updateSavedColorPreview(s)}},setSavedColorsCookie:function(o,t){var e=new Date,a=31536e7,n=new Date(e.getTime()+a);n=n.toGMTString(),"undefined"==typeof t?document.cookie="pickAColorSavedColors-allSavedColors="+o+";expires="+n:document.cookie="pickAColorSavedColors-"+t+"="+o+"; expires="+n},saveColorsToLocalStorage:function(o,t){if(a)if("undefined"==typeof t)try{localStorage.allSavedColors=JSON.stringify(o)}catch(e){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+t]=JSON.stringify(o)}catch(e){localStorage.clear()}else m.setSavedColorsCookie(o,t)},removeFromArray:function(t,e){-1!==o.inArray(e,t)&&t.splice(o.inArray(e,t),1)},updateSavedColors:function(o,t,e){m.removeFromArray(t,o),t.unshift(o),m.saveColorsToLocalStorage(t,e)},addToSavedColors:function(o,t,e){if(p.showSavedColors&&void 0!==o)if("#"!=o[0]&&(o="#"+o),m.updateSavedColors(o,f),p.saveColorsPerElement){var a=t.colors,n=t.dataAttr;m.updateSavedColors(o,a,n),m.updateSavedColorMarkup(e,a)}else m.updateSavedColorMarkup(e,f)},selectFromBasicColors:function(){var t=o(this).find("span:first").css("background-color"),e=arguments[0].els,a=arguments[0].savedColorsInfo;t=tinycolor(t).toHex(),o(e.thisEl).val(t),o(e.thisEl).trigger("change"),m.updatePreview(e.thisEl),m.addToSavedColors(t,a,e.savedColorsContent),m.closeDropdown(e.colorPreviewButton,e.colorMenu)},tapSpectrum:function(){var t=arguments[0].thisEvent,a=arguments[0].savedColorsInfo,n=arguments[0].els,r=arguments[0].mostRecentClick;t.stopPropagation();var s=o(this).find(".highlight-band"),i=m.getMoveableArea(s);e?m.moveHighlightBand(s,i,r):m.moveHighlightBand(s,i,t);var l=m.calculateHighlightedColor.apply(s,[{type:"basic"}]);m.addToSavedColors(l,a,n.savedColorsContent),n.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(){var t,a,n=arguments[0].thisFunction,s=arguments[0].theseArguments;o(this).on(r,function(e){t=o(window).scrollTop(),a=e}).on(l,function(r){var i=t-o(window).scrollTop();return e&&Math.abs(i)>0?!1:(s.thisEvent=r,s.mostRecentClick=a,n.apply(o(this),[s]),void 0)})},updateSaturationStyles:function(t,e,a){var r=(100*a).toString()+"%",s="#"+tinycolor("hsl("+e+",0%,"+r).toHex(),i="#"+tinycolor("hsl("+e+",50%,"+r).toHex(),l="#"+tinycolor("hsl("+e+",100%,"+r).toHex(),d="",c=(o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){d+="background-image: "+t+"(left, "+s+" 0%, "+i+" 50%, "+l+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+s+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+s+" 0%, "+i+" 50%, "+l+" 100%);background-image: linear-gradient(to right, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: -webkit-gradient(linear, left top, right top,color-stop(0, "+s+"),color-stop(0.5, "+i+"),color-stop(1, "+l+"));"+d,n){var u=o(t).find(".saturation-spectrum-0"),h=o(t).find(".saturation-spectrum-1");u.css("filter",c),h.css("filter",p)}else t.attr("style",d)},updateLightnessStyles:function(t,e,a){var r=(100*a).toString()+"%",s="#"+tinycolor("hsl("+e+","+r+",100%)").toHex(),i="#"+tinycolor("hsl("+e+","+r+",50%)").toHex(),l="#"+tinycolor("hsl("+e+","+r+",0%)").toHex(),d="",c=(o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){d+="background-image: "+t+"(left, "+s+" 0%, "+i+" 50%, "+l+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+s+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: linear-gradient(to right, "+s+" 0%, "+i+" 50%, "+l+" 100%); background-image: -webkit-gradient(linear, left top, right top, color-stop(0, "+s+"), color-stop(0.5, "+i+"), color-stop(1, "+l+")); "+d,n){var u=o(t).find(".lightness-spectrum-0"),h=o(t).find(".lightness-spectrum-1");u.css("filter",c),h.css("filter",p)}else t.attr("style",d)},updateHueStyles:function(t,e,a){var r=(100*e).toString()+"%",s=(100*a).toString()+"%",i="#"+tinycolor("hsl(0,"+r+","+s+")").toHex(),l="#"+tinycolor("hsl(60,"+r+","+s+")").toHex(),d="#"+tinycolor("hsl(120,"+r+","+s+")").toHex(),c="#"+tinycolor("hsl(180,"+r+","+s+")").toHex(),p="#"+tinycolor("hsl(240,"+r+","+s+")").toHex(),u="#"+tinycolor("hsl(300,"+r+","+s+")").toHex(),h="#"+tinycolor("hsl(0,"+r+","+s+")").toHex(),g="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)",v="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+d+"', GradientType=1)",f="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+d+"', endColorstr='"+c+"', GradientType=1)",C="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+c+"', endColorstr='"+p+"', GradientType=1)",m="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+p+"', endColorstr='"+u+"', GradientType=1)",b="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+u+"', endColorstr='"+h+"', GradientType=1)",w="";o.each(["-webkit-linear-gradient","-o-linear-gradient"],function(o,t){w+="background-image: "+t+"(left, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);"});if(w+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+i+"),color-stop(17%, "+l+"),color-stop(34%, "+d+"),color-stop(51%, "+c+"),color-stop(68%, "+p+"),color-stop(85%, "+u+"),color-stop(100%, "+h+"));background-image: linear-gradient(to right, "+i+" 0%, "+l+" 17%, "+d+" 24%,"+c+" 51%,"+p+" 68%,"+u+" 85%,"+h+" 100%); background-image: -moz-linear-gradient(left center, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);",n){var S=o(t).find(".hue-spectrum-0"),y=o(t).find(".hue-spectrum-1"),k=o(t).find(".hue-spectrum-2"),x=o(t).find(".hue-spectrum-3"),H=o(t).find(".hue-spectrum-4"),A=o(t).find(".hue-spectrum-5");S.css("filter",g),y.css("filter",v),k.css("filter",f),x.css("filter",C),H.css("filter",m),A.css("filter",b)}else t.attr("style",w)},getHighlightedHue:function(){var t=o(this),a=t.outerWidth(),n=a/2,r=parseInt(t.css("left"),10)+n,s=t.parents(".advanced-list"),i=s.find(".color-preview"),l=s.find(".spectrum-lightness"),d=s.find(".spectrum-saturation"),c=parseInt(s.find(".color-box").first().width(),10),p=s.find(".hue-value"),u=arguments[0].l,h=arguments[0].s,g=(100*h).toString()+"%",v=(100*u).toString()+"%";0===c&&(c=e?160:300);var f=Math.floor(r/c*360),C="hsl("+f+","+g+","+v+")";return C="#"+tinycolor(C).toHex(),i.css("background-color",C),p.text(f),m.updateLightnessStyles(l,f,h),m.updateSaturationStyles(d,f,u),f},getHighlightedSaturation:function(){var t=o(this),a=t.outerWidth(),n=a/2,r=parseInt(t.css("left"),10)+n,s=t.parents(".advanced-list"),i=s.find(".color-preview"),l=s.find(".spectrum-lightness"),d=s.find(".spectrum-hue"),c=s.find(".saturation-value"),p=parseInt(s.find(".color-box").first().width(),10),u=arguments[0].l,h=(100*u).toString()+"%",g=arguments[0].h;0===p&&(p=e?160:300);var v=r/p,f=Math.round(100*v).toString()+"%",C="hsl("+g+","+f+","+h+")";return C="#"+tinycolor(C).toHex(),i.css("background-color",C),c.text(f),m.updateLightnessStyles(l,g,v),m.updateHueStyles(d,v,u),v},updateAdvancedInstructions:function(o){o.html("Press the color preview to choose this color")}};return this.each(function(t){m.initialize.apply(this,[t]);var e,n,r={thisEl:o(this),thisWrapper:o(this).parent(),colorTextInput:o(this).find("input"),colorMenuLinks:o(this).parent().find(".color-menu li a"),colorPreviewButton:o(this).parent().find(".input-group-btn"),colorMenu:o(this).parent().find(".color-menu"),colorSpectrums:o(this).parent().find(".color-box"),basicSpectrums:o(this).parent().find(".basicColors-content .color-box"),touchInstructions:o(this).parent().find(".color-menu-instructions"),advancedInstructions:o(this).parent().find(".advanced-instructions"),highlightBands:o(this).parent().find(".highlight-band"),basicHighlightBands:o(this).parent().find(".basicColors-content .highlight-band")};if(u&&(r.tabs=r.thisWrapper.find(".tab")),p.showSavedColors&&(r.savedColorsContent=r.thisWrapper.find(".savedColors-content"),p.saveColorsPerElement))if(n={colors:[],dataObj:o(this).data()},o.each(n.dataObj,function(o){n.dataAttr=o}),a&&localStorage["pickAColorSavedColors-"+n.dataAttr])n.colors=JSON.parse(localStorage["pickAColorSavedColors-"+n.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+n.dataAttr))for(var s=document.cookie.split(";"),h=0;h<s.length;h++)s[h].match(n.dataAttr)&&(n.colors=s[h].split("=")[1].split(","));else n.colors=f;p.showAdvanced&&(e={h:0,s:1,l:.5},r.advancedSpectrums=r.thisWrapper.find(".advanced-list").find(".color-box"),r.advancedHighlightBands=r.thisWrapper.find(".advanced-list").find(".highlight-band"),r.hueSpectrum=r.thisWrapper.find(".spectrum-hue"),r.lightnessSpectrum=r.thisWrapper.find(".spectrum-lightness"),r.saturationSpectrum=r.thisWrapper.find(".spectrum-saturation"),r.hueHighlightBand=r.thisWrapper.find(".spectrum-hue .highlight-band"),r.lightnessHighlightBand=r.thisWrapper.find(".spectrum-lightness .highlight-band"),r.saturationHighlightBand=r.thisWrapper.find(".spectrum-saturation .highlight-band"),r.advancedPreview=r.thisWrapper.find(".advanced-content .color-preview")),m.addToSavedColors(g.defaultColor,n,r.savedColorsContent),m.updatePreview(r.thisEl),r.thisEl.focus(function(){var t=o(this);g.typedColor=t.val(),p.allowBlank||t.val(""),m.toggleDropdown(r.colorPreviewButton,r.ColorMenu)}).blur(function(){var t=o(this);g.newValue=t.val(),g.newValue.match(/^\s+$|^$/)?p.allowBlank||t.val(g.typedColor):(g.newValue=tinycolor(g.newValue).toHex(),t.val(g.newValue),m.addToSavedColors(g.newValue,n,r.savedColorsContent)),m.toggleDropdown(r.colorPreviewButton,r.ColorMenu),m.updatePreview(t)}),m.executeUnlessScrolled.apply(r.colorPreviewButton,[{thisFunction:m.pressPreviewButton,theseArguments:{}}]),m.executeUnlessScrolled.apply(o(document),[{thisFunction:m.closeDropdownIfOpen,theseArguments:{button:r.colorPreviewButton,menu:r.colorMenu}}]),r.colorMenu.on(l,function(o){o.stopPropagation()}),r.thisEl.on(l,function(o){o.stopPropagation()}),m.executeUnlessScrolled.apply(r.colorMenuLinks,[{thisFunction:m.selectFromBasicColors,theseArguments:{els:r,savedColorsInfo:n}}]),u&&m.tabbable.apply(r.tabs),(p.showSpectrum||p.showAdvanced)&&m.horizontallyDraggable.apply(r.highlightBands),p.showSpectrum&&(m.executeUnlessScrolled.apply(r.basicSpectrums,[{thisFunction:m.tapSpectrum,theseArguments:{savedColorsInfo:n,els:r}}]),o(r.basicHighlightBands).on(d,function(o){o.target;m.calculateHighlightedColor.apply(this,[{type:"basic"}])}).on(c,function(o){var t=o.delegateTarget,e=m.calculateHighlightedColor.apply(t,[{type:"basic"}]);m.addToSavedColors(e,n,r.savedColorsContent)})),p.showAdvanced&&(o(r.hueHighlightBand).on(d,function(o){e.h=m.getHighlightedHue.apply(this,[e])}),o(r.lightnessHighlightBand).on(d,function(){m.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:e}])}).on(i,function(){e.l=m.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:e}])}),o(r.saturationHighlightBand).on(d,function(){m.getHighlightedSaturation.apply(this,[e])}).on(c,function(){e.s=m.getHighlightedSaturation.apply(this,[e])}),o(r.advancedHighlightBand).on(c,function(){m.updateAdvancedInstructions(r.advancedInstructions)}),o(r.lightnessSpectrum).click(function(t){t.stopPropagation();var a=o(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,t),e.l=m.calculateHighlightedColor.apply(a,[{type:"advanced",hsl:e}])}),o(r.hueSpectrum).click(function(t){t.stopPropagation();var a=o(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,t),e.h=m.getHighlightedHue.apply(a,[e])}),o(r.saturationSpectrum).click(function(t){t.stopPropagation();var a=o(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,t),e.s=m.getHighlightedSaturation.apply(a,[e])}),o(r.advancedSpectrums).click(function(){m.updateAdvancedInstructions(r.advancedInstructions)}),o(r.advancedPreview).click(function(){var t=tinycolor(o(this).css("background-color")).toHex();o(r.thisEl).val(t),o(r.thisEl).trigger("change"),m.updatePreview(r.thisEl),m.addToSavedColors(t,n,r.savedColorsContent),m.closeDropdown(r.colorPreviewButton,r.colorMenu)})),p.showSavedColors&&(o(r.savedColorsContent).click(function(t){var e=o(t.target);if(e.is("SPAN")||e.is("A")){var a=e.is("SPAN")?e.parent().attr("class").split("#")[1]:e.attr("class").split("#")[1];o(r.thisEl).val(a),o(r.thisEl).trigger("change"),m.updatePreview(r.thisEl),m.closeDropdown(r.colorPreviewButton,r.colorMenu),m.addToSavedColors(a,n,r.savedColorsContent)}}),p.saveColorsPerElement?p.saveColorsPerElement&&m.updateSavedColorMarkup(r.savedColorsContent,n.colors):m.updateSavedColorMarkup(r.savedColorsContent,f))})}}(jQuery);